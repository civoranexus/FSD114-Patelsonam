{% extends 'core/base_instructor.html' %}
{% load static %}

{% block content %}
<style>

body{
    background:#a6c1de;
}

/* Dashboard Cards */

.dashboard-card{
    height:170px;
    border-radius:15px;
    background:rgba(240, 240, 240, 0.985);
    box-shadow:0 8px 25px rgba(0,0,0,.08);
    transition:.3s ease;
}

.course-card{
    border-radius:15px;
    box-shadow:0 8px 25px rgba(0,0,0,.08);
}

/* Glow hover */

.glow-card:hover{
    transform:translateY(-6px);
    box-shadow:0 0 25px rgba(128, 152, 190, 0.776);
}

/* Numbers */

.card-text{
    font-size:26px;
    font-weight:700;
    color:#020b18;
}

/* Buttons */

.glow-btn{
    background:linear-gradient(45deg,#4b85dd76,#b190e7d5);
    color:rgb(6, 14, 47);
    border:none;
    border-radius:25px;
    padding:6px 18px;
    box-shadow:0 0 12px rgba(13,110,253,.6);
}

.glow-btn:hover{
    box-shadow:0 0 25px rgba(13,110,253,1);
    color:rgb(9, 5, 30);
}

/* Blink Button */

.blink-btn{
    background:#dc3545;
    color:rgba(208, 34, 34, 0.804);
    border-radius:25px;
    animation:blink 1.4s infinite;
}

@keyframes blink{
    0%{box-shadow:0 0 5px red;}
    50%{box-shadow:0 0 20px red;}
    100%{box-shadow:0 0 5px red;}
}

/* Quick Action Buttons */

.action-btn{
    padding:14px;
    font-weight:600;
}

/* Calendar polish */

#calendar{
    margin-top:20px;
    background:white;
    padding:15px;
    border-radius:15px;
    box-shadow:0 8px 25px rgba(0,0,0,.08);
}

/* Sidebar */

.list-group-item.active{
    background:linear-gradient(45deg,#0d6efd,#6610f2);
    border:none;
}

</style>

<div class="container-fluid mt-4">

  <!-- Summary Cards -->
  <div class="row mb-4 g-3">
    <div class="col-md-3">
      <div class="card dashboard-card glow-card text-center">
        <div class="card-body">
          <h5 class="card-title">Courses</h5>
          <p class="card-text">{{ total_courses }}</p>
          <a href="{% url 'my_courses' %}" class="btn btn-sm glow-btn">View Courses</a>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card dashboard-card glow-card text-center">
        <div class="card-body">
          <h5 class="card-title">Students</h5>
          <p class="card-text">{{ total_students }}</p>
          <a href="{% url 'student_attendance' %}" class="btn btn-sm glow-btn">View Students</a>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card dashboard-card glow-card text-center">
        <div class="card-body">
          <h5 class="card-title">Pending Assignments</h5>
          <p class="card-text">{{ pending_assignments }}</p>
          <a href="{% url 'assignments' %}" class="btn btn-sm glow-btn">View Tasks</a>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card dashboard-card glow-card text-center">
        <div class="card-body">
          <h5 class="card-title">Notifications</h5>
          <p class="card-text">{{ notifications_count }}</p>
          <a href="{% url 'notifications' %}" class="btn btn-sm blink-btn">Check Now</a>
        </div>
      </div>
    </div>
  </div>

  <!-- Quick Actions -->
  <h5 class="mb-3">Quick Actions</h5>
  <div class="row mb-4 g-3">
    <div class="col-md-3">
      <button class="btn action-btn glow-btn w-100">Add Assignment</button>
    </div>
    <div class="col-md-3">
      <button class="btn action-btn glow-btn w-100">Schedule Class</button>
    </div>
    <div class="col-md-3">
      <button class="btn action-btn glow-btn w-100">Send Announcement</button>
    </div>
    <div class="col-md-3">
      <button class="btn action-btn glow-btn w-100">Mark Attendance</button>
    </div>
  </div>

  <!-- My Courses Section -->
  <h4 class="mb-3">My Courses</h4>
  <div class="row mb-4 g-3">
    {% for course in courses %}
    <div class="col-md-4">
      <div class="card course-card glow-card">
        <div class="card-body">
          <h5 class="card-title">{{ course.name }}</h5>
          <p class="card-text">Students: {{ course.student_count }}</p>
          <p class="card-text">Next Class: {{ course.next_class|date:"d M, Y H:i" }}</p>
          <a href="{% url 'course_detail' course.id %}" class="btn btn-sm glow-btn">View Details</a>
        </div>
      </div>
    </div>
    {% empty %}
    <p>No courses assigned yet.</p>
    {% endfor %}
  </div>

  <!-- Calendar Section -->
  <h4>Upcoming Classes & Deadlines</h4>
  <div id="calendar"></div>

</div>

<!-- FullCalendar JS -->
<link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/main.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/main.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
  var calendarEl = document.getElementById('calendar');
  var calendar = new FullCalendar.Calendar(calendarEl, {
    initialView: 'dayGridMonth',
    height: 500,
    events: [
      {% for event in events %}
      {
        title: '{{ event.title }}',
        start: '{{ event.start_date }}',
        end: '{{ event.end_date }}',
        url: '{{ event.url }}'
      },
      {% endfor %}
    ]
  });
  calendar.render();
});
</script>

{% endblock %}
